var Ybq,TypeAheadContainerSettings,TypeAheadContainer;String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(n){return n.toUpperCase()})};Ybq=Ybq||{};Ybq.Internal={};Ybq.RootServer="";Ybq.fromServer=function(n){return Ybq.RootServer+n};Ybq.copyToClipboard=function(n){var t=document.createElement("textarea");t.value=n;t.setAttribute("readonly","");t.style.position="absolute";t.style.left="-9999px";document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)};Ybq.configureCommonElements=function(){$("a").click(function(){this.blur()});$(".alert .alert-autoclose").click(function(){$(this).hide()});$("input[data-digits-only]").on("keypress",function(n){if(n.charCode<48||n.charCode>57)return n.preventDefault(),!1}).on("keyup",function(){var n=$(this).val(),i=parseInt($(this).attr("maxlength"));if(n.length>i)return $(this).val(""),!1;var r=parseInt($(this).attr("min")),u=parseInt($(this).attr("max")),t=parseInt(n);return t<r||t>u?($(this).val(""),!1):!0});$("input[data-alphanumeric]").attr("onkeypress","return /[a-zA-Z0-9-_]/.test(event.charCode)");$("input[data-click-on-enter]").each(function(){$(this).attr("onkeyup","Ybq.clickOnEnter(event, '"+$(this).data("click-on-enter")+"')")});$(".table-hover tbody tr td").click(function(){var t=$(this).attr("data-notselectable"),i,n;(typeof t==typeof undefined||t===!1)&&(i=$(this).closest("tr"),n=i.data("url"),n.length>0&&Ybq.gotoRelative(n))});$(".ybq-inputfile").each(function(){var t=$(this).find("input[type=file]").first();t.hide();var i="#"+$(t).attr("id"),f=i+"-isdefined",n=i+"-preview",u=i+"-remover",r=i+"-placeholder",e=$(f).val()==="true";e?$(r).hide():$(r).show();$(r).click(function(){t.click()});$(n).data("fileid",i);e?$(n).show():$(n).hide();$(n).click(function(){t.click()});e?$(u).show():$(u).hide();$(u).click(function(){return t.val(""),$(n).removeAttr("src").removeAttr("title"),$(n).hide(),$(r).show(),$(this).hide(),$(f).val("false"),!1});t.change(function(t){var i=t.target.files,e;i&&i[0]&&(e=new FileReader,e.onload=function(t){$(n).attr("src",t.target.result);$(n).show();$(r).hide();$(u).show();$(f).val("true")},e.readAsDataURL(i[0]))});t.click(function(n){return n.stopPropagation()})});Ybq.imgLoadError=function(n){var t=$(n).data("fileid")+"-placeholder",i;$(n).hide();$(t).append("not found");$(t).show();i=$(n).data("fileid")+"-remover";$(i).hide()}};Ybq.selectableTable=function(){$(".table-hover tbody tr td").click(function(){var t=$(this).attr("data-notselectable"),i,n;(typeof t==typeof undefined||t===!1)&&(i=$(this).closest("tr"),n=i.data("url"),n.length>0&&Ybq.gotoRelative(n))})};Ybq.defaultImage=function(n,t){n.onerror="";n.src=t};Ybq.postForm=function(n,t,i){var r=$(n),u=new FormData(r[0]);r.find("input[type=file]").each(function(){u.append($(this).attr("name"),$(this)[0].files[0])});Ybq.notifyBeginOfOperation(n);$.ajax({cache:!1,url:r.attr("action"),type:r.attr("method"),dataType:"html",data:u,processData:!1,contentType:!1,success:function(i){Ybq.notifyEndOfOperation(n);t(i)},error:function(t){Ybq.notifyEndOfOperation(n);i(t)}})};Ybq.notifyBeginOfOperation=function(n){$(n+" input").attr("disabled","disabled");$(n+" button").attr("disabled","disabled");$(n+" a").attr("disabled","disabled");$(n+"-loader").show()};Ybq.notifyEndOfOperation=function(n){$(n+"-loader").hide();$(n+" button").removeAttr("disabled");$(n+" a").removeAttr("disabled");$(n+" input").removeAttr("disabled")};Ybq.invoke=function(n,t,i){$.ajax({cache:!1,url:Ybq.fromServer(n),success:t,error:i})};Ybq.goto=function(n){window.location=n};Ybq.gotoRelative=function(n){window.location=Ybq.fromServer(n)};Ybq.post=function(n,t,i,r){$.ajax({cache:!1,url:Ybq.fromServer(n),type:"post",data:t,success:i,error:r})};Ybq.toast=function(n,t,i,r){$(n).removeClass("alert-success alert-danger alert-info alert-warning");$(n).html(t);$(n).addClass(i?r?"alert-warning":"alert-success":"alert-danger");$(n).show();window.setTimeout(function(){$(n).hide()},2500)};Ybq.alert=function(n,t,i){var r="<i class='fa fa-check text-success'><\/i>",u="green",f;return t?i&&(r="<i class='fa fa-warning text-warning'><\/i>",u="orange"):(r="<i class='fa fa-close text-danger'><\/i>",u="red"),f=$.Deferred(),$.confirm({keyboardEnabled:!0,title:r+" "+n,type:u,content:" ",autoClose:"ok|3000",buttons:{ok:{keys:["Enter"],text:"OK",action:function(){f.resolve("true")}}}}),f.promise()};Ybq.validateEmail=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)};Ybq.formatNumber=function(n,t,i){t==null&&(t=",");i==null&&(i="");var r=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t);return r+" "+i};Ybq.mobilize=function(){try{var n=WURFL.is_mobile;n&&$(".hidden-mobile").hide()}catch(t){console.log(t)}};Ybq.clickOnEnter=function(n,t){n.keyCode===13&&$(t).click()};Ybq.clearFormAfterTimeout=function(n,t){var i=2500;t!=undefined&&(i=t);window.setTimeout(function(){$(n+"-loader").hide();$(n+" div.has-feedback").removeClass("has-error");$(n+"-message").html("").hide();$(n+" input").removeAttr("has-error")},i)};Ybq.canAcceptValueOf=function(n,t,i,r,u){var f="#"+t,e=$(f).val();return i(e)?!0:((u==undefined||u.length===0)&&(u=t),$(n+"-message").removeClass("alert-success alert-danger alert-warning").addClass("alert-info").show().html(r),$(n+"-group-"+u).addClass("has-error"),$(f).focus(),!1)};Ybq.invalidateInputField=function(n,t,i){return $(n+"-message").removeClass("alert-success alert-danger alert-warning").addClass("alert-info").show().html(i),$(t).focus(),!1};Ybq.canAcceptFormContent=function(n,t){var u=0,f=[],r;Ybq.Internal.resetAllTabs(n);for(r in t)if(t.hasOwnProperty(r)){var i=t[r],e="#"+i.fieldId,o=$.trim($(e).val());i.validator(o)?$(n+"-group-"+i.fieldId).removeClass("has-error"):($(n+"-group-"+i.fieldId).addClass("has-error"),Ybq.Internal.tabErrorOn(n,i.tabId,!0),f[i.tabId]===undefined&&(f[i.tabId]=i.fieldId,$(e).focus()),u++)}return u===0};Ybq.Internal.resetAllTabs=function(n){$("div[role=tabpanel]").each(function(){var t=n+"-"+$(this).attr("id")+"-haserror";$(t).hide()})};Ybq.Internal.tabErrorOn=function(n,t,i){var r=n+"-"+t+"-haserror";i?$(r).show():$(r).hide()};TypeAheadContainerSettings=function(){var n={};return n.postOnSelection=!1,n.displayKey="value",n.hintUrl="",n.targetSelector="",n.buddySelector="",n.submitSelector="",n.showHint=!0,n.maxNumberOfHints=10,n.highlight=!0,n};TypeAheadContainer=function(n){var t=new TypeAheadContainerSettings;jQuery.extend(t,n);this.hintAdapter=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(t.displayKey),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:t.maxNumberOfHints,remote:t.hintUrl});$(t.targetSelector).on("typeahead:selected",function(n,i){$(t.targetSelector).attr("data-itemselected",1);$(t.buddySelector).val(i.id);t.postOnSelection&&$(t.submitSelector).click()});$(t.targetSelector).on("blur",function(){var n=$(t.targetSelector).attr("data-itemselected");n!=="1"&&($(t.targetSelector).val(""),$(t.buddySelector).val(""))});$(t.targetSelector).on("input",function(){var n=$(t.targetSelector).attr("data-itemselected");n==="1"&&($(t.targetSelector).attr("data-itemselected",0),$(t.buddySelector).val(""),$(t.targetSelector).val(""))});this.attach=function(){this.hintAdapter.initialize();$(t.targetSelector).typeahead({hint:t.showHint,highlight:t.highlight,limit:t.maxNumberOfHints,autoSelect:!1},{displayKey:t.displayKey,source:this.hintAdapter.ttAdapter(),templates:{suggestion:function(n){return"<p><span>"+n.value+"<\/span><i class='pull-right'>"+(n.label==null?"":n.label)+"<\/i><\/p>"}}})}};Ybq.fixDropdowns=function(){$(document).on("shown.bs.dropdown",".dropdown",function(){var n=$(this).children(".dropdown-menu"),f=$(this).children(".dropdown-toggle"),t=n.offset(),i=t.top-f.height()-n.height()-$(window).scrollTop(),r=$(window).scrollTop()+$(window).height()-(t.top+n.height()),u;r<0&&(i>=0||i>r)&&$(this).addClass("dropup");u=$(window).width()-(t.left+n.width());u<10&&n.addClass("dropdown-menu-right")}).on("hidden.bs.dropdown",".dropdown",function(){$(this).removeClass("dropup")})};Ybq.processMultipleAjaxResponse=function(n){return n.split("---|||---")};Ybq.printPopup=function(n,t,i){(t==null||t.length===0)&&(t="_blank");(i==null||i.length===0)&&(i="toolbar=no,scrollbars=yes,resizable=yes,top=100,left=100,width=580,height=720;");window.open(Ybq.fromServer(n),t,i)};